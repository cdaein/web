---
// TODO:
// - apply width and height to figure wrapper to avoid layout shift.
//  - width and height attributes don't seem to work atm.

type Props = {
  /** Path string */
  src: string;
  caption?: string;
  width?: number;
  height?: number;
  autoplay?: boolean;
  /** Additional classes to add to the wrapper div */
  mb?: boolean;
  class?: string;
};
const {
  src,
  caption,
  width,
  height,
  autoplay,
  mb,
  class: className,
} = Astro.props;
---

<figure
  class:list={["video-wrapper mb-8 bg-gray-200", mb && "mb-8", className]}
>
  <video
    src={src}
    width={width}
    height={height}
    autoplay={autoplay}
    controls
    loop
    muted
    playsinline
  >
  </video>
  {caption && <figcaption>{caption}</figcaption>}
</figure>
